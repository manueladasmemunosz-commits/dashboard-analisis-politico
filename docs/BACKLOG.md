# Product Backlog - Dashboard Pol√≠tico

## üìÖ √öltima actualizaci√≥n: Enero 2025

---

## üéØ Estado Actual del Proyecto

### ‚úÖ Completado (Enero 2025)
- [x] Integraci√≥n con BigQuery
- [x] B√∫squeda case-insensitive
- [x] Operadores l√≥gicos (AND, OR, NOT, par√©ntesis)
- [x] Eliminaci√≥n de duplicados por link
- [x] Manejo correcto de timezone (UTC)
- [x] Timeline interactivo con clicks
- [x] Modal de detalles de posts
- [x] Word Cloud manual
- [x] Top posts por engagement
- [x] Optimizaci√≥n de performance
- [x] Validaciones de seguridad en API
- [x] Deploy en Vercel con adapter-vercel

---

## üöÄ Prioridad Alta (Pr√≥ximas 2 semanas)

### 1. Exportaci√≥n de Datos
**Descripci√≥n:** Permitir exportar los resultados filtrados a diferentes formatos

**Tareas:**
- [ ] Bot√≥n de exportaci√≥n en dashboard
- [ ] Exportar a CSV con todos los campos
- [ ] Exportar a Excel (XLSX) con formato
- [ ] Exportar a PDF con resumen visual (gr√°ficos incluidos)
- [ ] Incluir metadatos (fecha de exportaci√≥n, filtros aplicados, total de registros)

**Estimaci√≥n:** 1-2 d√≠as
**Valor:** Alto - Los usuarios necesitan llevar los datos fuera del dashboard

**Archivos afectados:**
- `/src/routes/+page.svelte` - Agregar botones de exportaci√≥n
- `/src/lib/utils/export.js` - Nueva funcionalidad de exportaci√≥n

---

### 2. Cach√© de B√∫squedas Frecuentes
**Descripci√≥n:** Cachear b√∫squedas comunes para mejorar performance

**Tareas:**
- [ ] Implementar cach√© en memoria con TTL (Time To Live)
- [ ] Cachear √∫ltimas 10 b√∫squedas por 15 minutos
- [ ] Mostrar indicador cuando se usa cach√©
- [ ] Bot√≥n para forzar refresh (invalidar cach√©)
- [ ] Logs de hit/miss de cach√©

**Estimaci√≥n:** 1 d√≠a
**Valor:** Alto - Reduce carga en BigQuery y mejora UX

**Archivos afectados:**
- `/src/routes/api/bigquery/+server.js` - Implementar cach√©
- `/src/routes/+page.svelte` - Indicador de cach√©

**Consideraciones:**
- Usar `node-cache` o similar
- TTL de 15 minutos es razonable para datos pol√≠ticos
- Invalidar cach√© si se detectan nuevos datos

---

### 3. Filtros Avanzados de Engagement
**Descripci√≥n:** Filtrar posts por nivel de engagement

**Tareas:**
- [ ] Slider de rango de likes
- [ ] Slider de rango de comentarios
- [ ] Slider de rango de shares
- [ ] Filtro de engagement total m√≠nimo
- [ ] Presets ("Alto engagement", "Medio", "Bajo")

**Estimaci√≥n:** 1 d√≠a
**Valor:** Medio-Alto - Permite enfocarse en posts m√°s relevantes

**Archivos afectados:**
- `/src/lib/stores/dashboard.js` - Agregar filtros de engagement
- `/src/routes/+page.svelte` - UI de sliders

---

### 4. Indicador de Progreso en B√∫squedas
**Descripci√≥n:** Mostrar progreso detallado durante b√∫squedas largas

**Tareas:**
- [ ] Barra de progreso con porcentaje
- [ ] Mensajes de estado ("Consultando BigQuery...", "Procesando datos...", etc.)
- [ ] Estimaci√≥n de tiempo restante
- [ ] Mostrar cantidad de registros parciales

**Estimaci√≥n:** 4-6 horas
**Valor:** Medio - Mejora UX en b√∫squedas largas

**Archivos afectados:**
- `/src/routes/+page.svelte` - UI de progreso
- `/src/routes/api/bigquery/+server.js` - Streaming de progreso

---

## üìä Prioridad Media (Pr√≥ximas 4 semanas)

### 5. An√°lisis de Sentimiento
**Descripci√≥n:** Detectar sentimiento de los posts (positivo, negativo, neutral)

**Tareas:**
- [ ] Investigar APIs de an√°lisis de sentimiento en espa√±ol
- [ ] Integrar con servicio (OpenAI, Google NLP, o local con transformers)
- [ ] Agregar campo de sentimiento a cada post
- [ ] Filtrar por sentimiento
- [ ] Gr√°fico de distribuci√≥n de sentimientos
- [ ] Timeline de sentimientos en el tiempo

**Estimaci√≥n:** 3-5 d√≠as
**Valor:** Alto - Insight valioso para an√°lisis pol√≠tico

**Consideraciones:**
- Evaluar costos de APIs externas
- Considerar cache de sentimientos ya calculados
- Posible integraci√≥n con BigQuery ML

---

### 6. Comparaci√≥n de Per√≠odos
**Descripci√≥n:** Comparar dos per√≠odos de tiempo diferentes

**Tareas:**
- [ ] Selector de dos rangos de fechas (A vs B)
- [ ] Timeline con dos l√≠neas superpuestas
- [ ] M√©tricas comparativas (% de cambio)
- [ ] Tabla de diferencias
- [ ] Palabras que subieron/bajaron en frecuencia

**Estimaci√≥n:** 2-3 d√≠as
**Valor:** Medio-Alto - Permite ver evoluci√≥n temporal

**Archivos afectados:**
- `/src/lib/stores/dashboard.js` - Soporte para dos datasets
- `/src/lib/components/charts/TimelineChart.svelte` - L√≠neas comparativas
- `/src/routes/+page.svelte` - UI de comparaci√≥n

---

### 7. Alertas y Notificaciones
**Descripci√≥n:** Sistema de alertas para keywords importantes

**Tareas:**
- [ ] Configurar keywords a monitorear
- [ ] Umbral de alertas (ej: m√°s de 10 posts por hora)
- [ ] Notificaciones por email
- [ ] Dashboard de alertas activas
- [ ] Historial de alertas

**Estimaci√≥n:** 2-3 d√≠as
**Valor:** Medio - √ötil para monitoreo en tiempo real

**Consideraciones:**
- Requiere backend adicional (cron jobs)
- Posible uso de Vercel Cron Jobs
- Integraci√≥n con servicio de email (SendGrid, etc.)

---

### 8. Gr√°fico de Red de Usuarios
**Descripci√≥n:** Visualizar red de interacciones entre usuarios

**Tareas:**
- [ ] Detectar menciones y respuestas entre usuarios
- [ ] Gr√°fico de red con D3.js o similar
- [ ] Tama√±o de nodos seg√∫n influencia
- [ ] Filtrar por tipo de relaci√≥n (menciona, responde, cita)
- [ ] Zoom e interacci√≥n con red

**Estimaci√≥n:** 4-5 d√≠as
**Valor:** Medio - Insight de redes de influencia

**Archivos afectados:**
- `/src/lib/components/charts/NetworkGraph.svelte` - Nuevo componente
- `/src/workers/network.worker.js` - Procesamiento de red

---

### 9. Historial de B√∫squedas
**Descripci√≥n:** Guardar y acceder a b√∫squedas previas

**Tareas:**
- [ ] LocalStorage para guardar b√∫squedas
- [ ] Dropdown de b√∫squedas recientes
- [ ] Guardar filtros completos (no solo searchTerm)
- [ ] Bot√≥n para borrar historial
- [ ] L√≠mite de 20 b√∫squedas m√°s recientes

**Estimaci√≥n:** 1 d√≠a
**Valor:** Medio - Mejora UX

**Archivos afectados:**
- `/src/lib/stores/searchHistory.js` - Nuevo store
- `/src/routes/+page.svelte` - UI de historial

---

### 10. Filtro por Fuente (Twitter/Instagram/News)
**Descripci√≥n:** Filtrar posts seg√∫n su origen

**Tareas:**
- [ ] Detectar fuente bas√°ndose en campos del post
- [ ] Checkboxes para cada fuente
- [ ] Indicador visual de fuente en cada post
- [ ] Estad√≠sticas por fuente
- [ ] Gr√°fico de distribuci√≥n por fuente

**Estimaci√≥n:** 1 d√≠a
**Valor:** Medio - Permite an√°lisis espec√≠fico por plataforma

**Archivos afectados:**
- `/src/lib/stores/dashboard.js` - Agregar filtro de fuente
- `/src/routes/+page.svelte` - UI de filtro

---

## üîÆ Prioridad Baja (Backlog futuro)

### 11. Modo Oscuro
**Descripci√≥n:** Tema oscuro para el dashboard

**Tareas:**
- [ ] Toggle de tema claro/oscuro
- [ ] Colores oscuros para todos los componentes
- [ ] Adaptar gr√°ficos a modo oscuro
- [ ] Guardar preferencia en localStorage

**Estimaci√≥n:** 1-2 d√≠as
**Valor:** Bajo - Nice to have

---

### 12. Multi-idioma (i18n)
**Descripci√≥n:** Soporte para ingl√©s y espa√±ol

**Tareas:**
- [ ] Configurar i18n (svelte-i18n)
- [ ] Traducir todas las strings
- [ ] Selector de idioma
- [ ] Guardar preferencia

**Estimaci√≥n:** 2-3 d√≠as
**Valor:** Bajo - Solo si hay usuarios internacionales

---

### 13. Dashboard M√≥vil Optimizado
**Descripci√≥n:** Mejorar experiencia en dispositivos m√≥viles

**Tareas:**
- [ ] Dise√±o responsive mejorado
- [ ] Gr√°ficos adaptados a pantallas peque√±as
- [ ] Men√∫ hamburguesa
- [ ] Touch gestures en gr√°ficos

**Estimaci√≥n:** 2-3 d√≠as
**Valor:** Bajo-Medio - Depende de usuarios m√≥viles

---

### 14. Integraci√≥n con Otras Fuentes de Datos
**Descripci√≥n:** Agregar m√°s fuentes (Facebook, TikTok, etc.)

**Tareas:**
- [ ] Investigar APIs disponibles
- [ ] Unificar formato de datos
- [ ] Actualizar tabla de BigQuery
- [ ] Filtros espec√≠ficos por fuente

**Estimaci√≥n:** 5-10 d√≠as
**Valor:** Bajo-Medio - Depende de necesidades del negocio

---

### 15. Usuarios y Autenticaci√≥n
**Descripci√≥n:** Sistema de usuarios con diferentes permisos

**Tareas:**
- [ ] Autenticaci√≥n (Auth0, Clerk, o similar)
- [ ] Roles (admin, analyst, viewer)
- [ ] B√∫squedas guardadas por usuario
- [ ] Dashboards personalizados
- [ ] L√≠mites de uso por usuario

**Estimaci√≥n:** 5-7 d√≠as
**Valor:** Bajo - Solo si es multi-usuario

---

## üêõ Bugs Conocidos y Mejoras T√©cnicas

### Bugs Corregidos (Oct 23, 2025)
- [x] **Rango de fechas no inclusivo:** Fixed - Ahora incluye d√≠a completo final (hasta 23:59:59)
- [x] **Filtrado duplicado de searchTerm:** Fixed - BigQuery filtra, cliente no vuelve a filtrar
- [x] **Hora de noticias incorrecta:** Fixed - Ajuste +9h para aproximar hora real

### Bugs Menores
- [ ] **Formato de n√∫meros grandes:** N√∫meros de engagement muy altos se muestran sin separadores (ej: 123456 ‚Üí 123,456)
- [x] **Timezone en hover del timeline:** Fixed - Tooltips usan UTC correctamente
- [ ] **Loading state del Word Cloud:** Mejorar indicador de carga
- [ ] **Disclaimer de hora de noticias:** Agregar aviso sobre ajuste de +9h (pendiente usuario)

### Deuda T√©cnica
- [ ] **Tests unitarios:** Agregar tests para componentes cr√≠ticos
- [ ] **Tests E2E:** Tests de flujos completos con Playwright
- [ ] **TypeScript:** Migrar a TypeScript para mejor type safety
- [ ] **Error boundaries:** Agregar error boundaries en componentes
- [ ] **Logs estructurados:** Usar librer√≠a de logging (pino, winston)
- [ ] **Monitoring:** Agregar Sentry o similar para error tracking
- [ ] **Performance monitoring:** Agregar m√©tricas de Web Vitals

---

## üìà Mejoras de Performance

### Optimizaciones Futuras
- [ ] **Server-side rendering (SSR):** Considerar SSR para primera carga
- [ ] **Paginaci√≥n:** Implementar paginaci√≥n si datasets crecen mucho (>5000 posts)
- [ ] **Virtual scrolling:** Para listas largas de posts
- [ ] **Image lazy loading:** Cargar im√°genes de posts bajo demanda
- [ ] **Code splitting:** Dividir bundle por rutas
- [ ] **CDN para assets est√°ticos:** Usar CDN para im√°genes, fonts, etc.

---

## üîí Mejoras de Seguridad

### Hardening
- [ ] **Rate limiting:** Limitar requests a API de BigQuery por IP
- [ ] **CORS m√°s restrictivo:** Configurar CORS para dominios espec√≠ficos
- [ ] **Input sanitization:** Librer√≠a de sanitizaci√≥n de inputs
- [ ] **CSP headers:** Content Security Policy headers
- [ ] **Audit de dependencias:** Auditor√≠a regular de npm packages
- [ ] **Secrets rotation:** Pol√≠tica de rotaci√≥n de credenciales

---

## üìä M√©tricas de √âxito

### KPIs a Trackear
- [ ] Tiempo promedio de b√∫squeda
- [ ] Cantidad de b√∫squedas por d√≠a
- [ ] Usuarios activos diarios/semanales
- [ ] Errores de BigQuery
- [ ] Cache hit rate
- [ ] Tiempo de carga de p√°gina
- [ ] Uso de diferentes filtros

---

## üí° Ideas Exploratorias

### Para Investigar
- [ ] **Machine Learning:** Predicci√≥n de tendencias con ML
- [ ] **An√°lisis de im√°genes:** OCR y an√°lisis de im√°genes en posts
- [ ] **Video analysis:** An√°lisis de videos de Instagram/TikTok
- [ ] **Detecci√≥n de fake news:** Integraci√≥n con fact-checkers
- [ ] **Influencer scoring:** Sistema de scoring de influencers
- [ ] **Topic modeling:** Detecci√≥n autom√°tica de temas con LDA
- [ ] **Anomaly detection:** Detecci√≥n de spikes anormales de actividad

---

## üéØ Roadmap Visual

```
Enero 2025 [‚úÖ COMPLETADO]
‚îú‚îÄ Integraci√≥n BigQuery
‚îú‚îÄ B√∫squeda con operadores l√≥gicos
‚îî‚îÄ Performance optimization

Febrero 2025 [EN PROGRESO]
‚îú‚îÄ Exportaci√≥n de datos
‚îú‚îÄ Cach√© de b√∫squedas
‚îú‚îÄ Filtros de engagement
‚îî‚îÄ Indicador de progreso

Marzo 2025 [PLANIFICADO]
‚îú‚îÄ An√°lisis de sentimiento
‚îú‚îÄ Comparaci√≥n de per√≠odos
‚îî‚îÄ Sistema de alertas

Q2 2025 [BACKLOG]
‚îú‚îÄ Gr√°fico de red
‚îú‚îÄ Historial de b√∫squedas
‚îî‚îÄ Filtros por fuente

Q3 2025+ [FUTURO]
‚îú‚îÄ Multi-idioma
‚îú‚îÄ Modo oscuro
‚îî‚îÄ Nuevas fuentes de datos
```

---

## ü§ù C√≥mo Contribuir al Backlog

### Agregar Nueva Tarea
1. Definir descripci√≥n clara
2. Listar tareas espec√≠ficas
3. Estimar tiempo
4. Evaluar valor (Alto/Medio/Bajo)
5. Identificar archivos afectados
6. Agregar a la secci√≥n de prioridad correspondiente

### Priorizaci√≥n
Criterios de priorizaci√≥n:
1. **Valor para el usuario** (¬øResuelve un pain point?)
2. **Impacto t√©cnico** (¬øMejora performance/seguridad?)
3. **Esfuerzo requerido** (¬øCu√°nto tiempo toma?)
4. **Dependencias** (¬øDepende de otras tareas?)
5. **Urgencia** (¬øEs cr√≠tico o puede esperar?)

---

## üìù Notas de Versiones

### v1.0.0 - Enero 2025 (Actual)
- Lanzamiento inicial con BigQuery
- B√∫squeda completa con operadores l√≥gicos
- Timeline interactivo
- Word Cloud
- Top posts

### v1.1.0 - Febrero 2025 (Pr√≥ximo)
- Exportaci√≥n de datos
- Cach√© de b√∫squedas
- Filtros avanzados de engagement

### v2.0.0 - Q2 2025 (Futuro)
- An√°lisis de sentimiento
- Comparaci√≥n de per√≠odos
- Sistema de alertas

---

## üìû Feedback y Sugerencias

Para proponer nuevas funcionalidades:
1. Verificar que no est√© ya en este backlog
2. Describir el problema que resuelve
3. Proponer soluci√≥n t√©cnica
4. Estimar valor y esfuerzo
5. Agregar como issue o comentar en sesi√≥n con Claude
